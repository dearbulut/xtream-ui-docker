import{C as U,r as q,m as A,i as m,o as u,b as s,t as p,h as i,u as t,q as K,k as B,d as _,s as I,v as M,M as P,a as x,f as N,F as $,l as E,j as f}from"./app-wF5SolYh.js";import{_ as j}from"./AppLayout-DCUwBhsa.js";import{_ as h}from"./Button-COWAl97y.js";import{_ as y}from"./Input-CrzDra5-.js";import{_ as c}from"./MultiSelect-BPOOlx8k.js";import{_ as D}from"./DatePicker-Bd7KEKMG.js";/* empty css            */import"./useToast-BYzZ-uBf.js";import"./XMarkIcon-BhqYf4eJ.js";import"./transition-CkXZVhaw.js";import"./hidden-BqmzDmTH.js";import"./format-hgLsWgxO.js";import"./portal-CSVhat62.js";const S={class:"font-semibold text-xl text-gray-800 leading-tight"},F={class:"py-12"},L={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},O={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},T={class:"grid grid-cols-1 gap-6"},R={class:"space-y-6"},z={class:"flex items-center"},G={class:"space-y-6"},H={class:"mt-1 flex rounded-md shadow-sm"},J={class:"mt-2 flex flex-wrap gap-2"},Q=["onClick"],W={key:0,class:"mt-2 text-sm text-red-600"},X={class:"space-y-6"},Y={class:"flex items-center justify-end space-x-3"},ye={__name:"Form",props:{playlist:{type:Object,default:()=>({name:"",description:"",is_active:!0,expires_at:null,max_connections:1,allowed_ips:[],notes:"",channels:[],movies:[],series:[],bouquets:[]})},channels:Array,movies:Array,series:Array,bouquets:Array},setup(n){var b,g,V,w;const r=n,e=U({name:r.playlist.name,description:r.playlist.description,is_active:r.playlist.is_active,expires_at:r.playlist.expires_at,max_connections:r.playlist.max_connections,allowed_ips:r.playlist.allowed_ips||[],notes:r.playlist.notes,channels:((b=r.playlist.channels)==null?void 0:b.map(a=>a.id))||[],movies:((g=r.playlist.movies)==null?void 0:g.map(a=>a.id))||[],series:((V=r.playlist.series)==null?void 0:V.map(a=>a.id))||[],bouquets:((w=r.playlist.bouquets)==null?void 0:w.map(a=>a.id))||[]}),d=q(""),v=()=>{d.value&&!e.allowed_ips.includes(d.value)&&(e.allowed_ips.push(d.value),d.value="")},k=a=>{const l=e.allowed_ips.indexOf(a);l!==-1&&e.allowed_ips.splice(l,1)},C=()=>{r.playlist.id?e.put(route("playlists.update",r.playlist.id)):e.post(route("playlists.store"))};return(a,l)=>(u(),A(j,null,{header:m(()=>[s("h2",S,p(n.playlist.id?"Edit Playlist":"Add Playlist"),1)]),default:m(()=>[i(t(K),{title:n.playlist.id?"Edit Playlist":"Add Playlist"},null,8,["title"]),s("div",F,[s("div",L,[s("div",O,[s("form",{onSubmit:B(C,["prevent"]),class:"p-6 bg-white border-b border-gray-200"},[s("div",T,[s("div",R,[l[12]||(l[12]=s("h3",{class:"text-lg font-medium text-gray-900"},"Basic Information",-1)),s("div",null,[i(y,{modelValue:t(e).name,"onUpdate:modelValue":l[0]||(l[0]=o=>t(e).name=o),type:"text",label:"Name",error:t(e).errors.name},null,8,["modelValue","error"])]),s("div",null,[i(y,{modelValue:t(e).description,"onUpdate:modelValue":l[1]||(l[1]=o=>t(e).description=o),type:"textarea",label:"Description",error:t(e).errors.description},null,8,["modelValue","error"])]),s("div",z,[_(s("input",{type:"checkbox","onUpdate:modelValue":l[2]||(l[2]=o=>t(e).is_active=o),class:"focus:ring-primary-500 h-4 w-4 text-primary-600 border-gray-300 rounded"},null,512),[[I,t(e).is_active]]),l[11]||(l[11]=s("label",{class:"ml-2 block text-sm text-gray-900"}," Active ",-1))])]),s("div",G,[l[15]||(l[15]=s("h3",{class:"text-lg font-medium text-gray-900"},"Access Control",-1)),s("div",null,[i(D,{modelValue:t(e).expires_at,"onUpdate:modelValue":l[3]||(l[3]=o=>t(e).expires_at=o),label:"Expiry Date",error:t(e).errors.expires_at},null,8,["modelValue","error"])]),s("div",null,[i(y,{modelValue:t(e).max_connections,"onUpdate:modelValue":l[4]||(l[4]=o=>t(e).max_connections=o),type:"number",label:"Max Connections",min:"1",error:t(e).errors.max_connections},null,8,["modelValue","error"])]),s("div",null,[l[14]||(l[14]=s("label",{class:"block text-sm font-medium text-gray-700"}," Allowed IPs ",-1)),s("div",H,[_(s("input",{type:"text","onUpdate:modelValue":l[5]||(l[5]=o=>d.value=o),class:"focus:ring-primary-500 focus:border-primary-500 flex-1 block w-full rounded-none rounded-l-md sm:text-sm border-gray-300",placeholder:"Enter IP address",onKeyup:P(v,["enter"])},null,544),[[M,d.value]]),s("button",{type:"button",class:"-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-r-md text-gray-700 bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",onClick:v}," Add ")]),s("div",J,[(u(!0),x($,null,N(t(e).allowed_ips,o=>(u(),x("div",{key:o,class:"inline-flex rounded-full items-center py-0.5 pl-2.5 pr-1 text-sm font-medium bg-primary-100 text-primary-700"},[f(p(o)+" ",1),s("button",{type:"button",class:"flex-shrink-0 ml-0.5 h-4 w-4 rounded-full inline-flex items-center justify-center text-primary-400 hover:bg-primary-200 hover:text-primary-500 focus:outline-none focus:bg-primary-500 focus:text-white",onClick:Z=>k(o)},l[13]||(l[13]=[s("span",{class:"sr-only"},"Remove IP",-1),s("svg",{class:"h-2 w-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8"},[s("path",{"stroke-linecap":"round","stroke-width":"1.5",d:"M1 1l6 6m0-6L1 7"})],-1)]),8,Q)]))),128))]),t(e).errors.allowed_ips?(u(),x("p",W,p(t(e).errors.allowed_ips),1)):E("",!0)])]),s("div",X,[l[16]||(l[16]=s("h3",{class:"text-lg font-medium text-gray-900"},"Content Selection",-1)),s("div",null,[i(c,{modelValue:t(e).channels,"onUpdate:modelValue":l[6]||(l[6]=o=>t(e).channels=o),options:n.channels,label:"Channels",error:t(e).errors.channels,valueKey:"id",labelKey:"name"},null,8,["modelValue","options","error"])]),s("div",null,[i(c,{modelValue:t(e).movies,"onUpdate:modelValue":l[7]||(l[7]=o=>t(e).movies=o),options:n.movies,label:"Movies",error:t(e).errors.movies,valueKey:"id",labelKey:"name"},null,8,["modelValue","options","error"])]),s("div",null,[i(c,{modelValue:t(e).series,"onUpdate:modelValue":l[8]||(l[8]=o=>t(e).series=o),options:n.series,label:"Series",error:t(e).errors.series,valueKey:"id",labelKey:"name"},null,8,["modelValue","options","error"])]),s("div",null,[i(c,{modelValue:t(e).bouquets,"onUpdate:modelValue":l[9]||(l[9]=o=>t(e).bouquets=o),options:n.bouquets,label:"Bouquets",error:t(e).errors.bouquets,valueKey:"id",labelKey:"name"},null,8,["modelValue","options","error"])])]),s("div",null,[i(y,{modelValue:t(e).notes,"onUpdate:modelValue":l[10]||(l[10]=o=>t(e).notes=o),type:"textarea",label:"Notes",error:t(e).errors.notes},null,8,["modelValue","error"])]),s("div",Y,[i(h,{href:"/playlists",variant:"secondary",disabled:t(e).processing},{default:m(()=>l[17]||(l[17]=[f(" Cancel ")])),_:1},8,["disabled"]),i(h,{type:"submit",disabled:t(e).processing},{default:m(()=>[f(p(n.playlist.id?"Update":"Create"),1)]),_:1},8,["disabled"])])])],32)])])])]),_:1}))}};export{ye as default};
